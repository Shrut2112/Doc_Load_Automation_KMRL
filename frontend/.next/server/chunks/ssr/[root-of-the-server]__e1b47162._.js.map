{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/IIIT/Kochi-Metro-document/frontend/app/login/page.tsx"],"sourcesContent":["'use client'; // This must be a client component to handle user interaction\r\n\r\nimport { useState, FormEvent, Suspense } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport ReCAPTCHA from 'react-google-recaptcha';\r\nimport { ArrowLeft } from 'lucide-react';\r\n\r\n// A separate component to handle Suspense for useSearchParams\r\nconst LoginContent = () => {\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n    const role = searchParams.get('role') || 'department'; // Default to department\r\n\r\n    const [userId, setUserId] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [recaptchaToken, setRecaptchaToken] = useState<string | null>(null);\r\n    const [error, setError] = useState('');\r\n\r\n    const handleLogin = async (e: FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n\r\n        if (!userId || !password) {\r\n            setError('User ID and Password are required.');\r\n            return;\r\n        }\r\n        if (!recaptchaToken) {\r\n            setError('Please complete the reCAPTCHA challenge.');\r\n            return;\r\n        }\r\n\r\n        console.log('Logging in with:', {\r\n            role,\r\n            userId,\r\n            password,\r\n            recaptchaToken,\r\n        });\r\n\r\n        // --- Mock Login & Redirect ---\r\n        // On successful login, redirect to the main dashboard.\r\n        router.push('/dashboard');\r\n    };\r\n\r\n    const siteKey = process.env.NEXT_PUBLIC_RECAPTCHA_SITE_KEY;\r\n    if (!siteKey) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen bg-gray-900 text-white\">\r\n                <p className=\"text-red-400 text-center\">reCAPTCHA Site Key is not configured.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center min-h-screen bg-gray-900\">\r\n            <div className=\"w-full max-w-md p-8 space-y-8 bg-gray-950 rounded-2xl shadow-2xl\">\r\n                <div className=\"text-center\">\r\n                    <Link href=\"/\" className=\"text-3xl font-extrabold text-white\">\r\n                        KMRL <span className=\"text-blue-500\">Intelligent Hub</span>\r\n                    </Link>\r\n                    <h2 className=\"mt-4 text-2xl font-bold text-gray-300 capitalize\">\r\n                        {role} Portal Access\r\n                    </h2>\r\n                </div>\r\n\r\n                <form className=\"space-y-6\" onSubmit={handleLogin}>\r\n                    <div>\r\n                        <label htmlFor=\"userId\" className=\"text-sm font-bold text-gray-400\">\r\n                            User ID\r\n                        </label>\r\n                        <input\r\n                            id=\"userId\"\r\n                            name=\"userId\"\r\n                            type=\"text\"\r\n                            required\r\n                            value={userId}\r\n                            onChange={(e) => setUserId(e.target.value)}\r\n                            className=\"w-full px-4 py-3 mt-2 text-gray-100 bg-gray-800 border border-gray-700 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 focus:outline-none\"\r\n                            placeholder=\"Enter your User ID\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label\r\n                            htmlFor=\"password\"\r\n                            className=\"text-sm font-bold text-gray-400\"\r\n                        >\r\n                            Password\r\n                        </label>\r\n                        <input\r\n                            id=\"password\"\r\n                            name=\"password\"\r\n                            type=\"password\"\r\n                            required\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            className=\"w-full px-4 py-3 mt-2 text-gray-100 bg-gray-800 border border-gray-700 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 focus:outline-none\"\r\n                            placeholder=\"••••••••\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-center pt-2\">\r\n                        <ReCAPTCHA\r\n                            sitekey={siteKey}\r\n                            onChange={(token) => setRecaptchaToken(token)}\r\n                            theme=\"dark\" // Set the reCAPTCHA theme to dark\r\n                        />\r\n                    </div>\r\n\r\n                    {error && <p className=\"text-sm text-center text-red-400\">{error}</p>}\r\n\r\n                    <div>\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"w-full px-4 py-3 font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-950 focus:ring-blue-500 transition-colors duration-300\"\r\n                        >\r\n                            Login\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n                <div className=\"text-center\">\r\n                    <Link href=\"/\" className=\"inline-flex items-center gap-2 text-sm text-blue-400 hover:underline\">\r\n                        <ArrowLeft size={16} /> Back to Home\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// We wrap the main component in Suspense because `useSearchParams` needs it.\r\nexport default function LoginPage() {\r\n    return (\r\n        <Suspense fallback={<div className=\"flex items-center justify-center min-h-screen bg-gray-900 text-white\">Loading...</div>}>\r\n            <LoginContent />\r\n        </Suspense>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA,cAAc,6DAA6D;;;;;;;AAQ3E,8DAA8D;AAC9D,MAAM,eAAe;IACjB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,eAAe,IAAA,qJAAe;IACpC,MAAM,OAAO,aAAa,GAAG,CAAC,WAAW,cAAc,wBAAwB;IAE/E,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAgB;IACpE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,MAAM,cAAc,OAAO;QACvB,EAAE,cAAc;QAChB,SAAS;QAET,IAAI,CAAC,UAAU,CAAC,UAAU;YACtB,SAAS;YACT;QACJ;QACA,IAAI,CAAC,gBAAgB;YACjB,SAAS;YACT;QACJ;QAEA,QAAQ,GAAG,CAAC,oBAAoB;YAC5B;YACA;YACA;YACA;QACJ;QAEA,gCAAgC;QAChC,uDAAuD;QACvD,OAAO,IAAI,CAAC;IAChB;IAEA,MAAM;IACN;;IAQA,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC,uKAAI;4BAAC,MAAK;4BAAI,WAAU;;gCAAqC;8CACrD,8OAAC;oCAAK,WAAU;8CAAgB;;;;;;;;;;;;sCAEzC,8OAAC;4BAAG,WAAU;;gCACT;gCAAK;;;;;;;;;;;;;8BAId,8OAAC;oBAAK,WAAU;oBAAY,UAAU;;sCAClC,8OAAC;;8CACG,8OAAC;oCAAM,SAAQ;oCAAS,WAAU;8CAAkC;;;;;;8CAGpE,8OAAC;oCACG,IAAG;oCACH,MAAK;oCACL,MAAK;oCACL,QAAQ;oCACR,OAAO;oCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;oCACzC,WAAU;oCACV,aAAY;;;;;;;;;;;;sCAGpB,8OAAC;;8CACG,8OAAC;oCACG,SAAQ;oCACR,WAAU;8CACb;;;;;;8CAGD,8OAAC;oCACG,IAAG;oCACH,MAAK;oCACL,MAAK;oCACL,QAAQ;oCACR,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC3C,WAAU;oCACV,aAAY;;;;;;;;;;;;sCAIpB,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC,8LAAS;gCACN,SAAS;gCACT,UAAU,CAAC,QAAU,kBAAkB;gCACvC,OAAM;;;;;;;;;;;wBAIb,uBAAS,8OAAC;4BAAE,WAAU;sCAAoC;;;;;;sCAE3D,8OAAC;sCACG,cAAA,8OAAC;gCACG,MAAK;gCACL,WAAU;0CACb;;;;;;;;;;;;;;;;;8BAKT,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC,uKAAI;wBAAC,MAAK;wBAAI,WAAU;;0CACrB,8OAAC,6NAAS;gCAAC,MAAM;;;;;;4BAAM;;;;;;;;;;;;;;;;;;;;;;;AAM/C;AAGe,SAAS;IACpB,qBACI,8OAAC,iNAAQ;QAAC,wBAAU,8OAAC;YAAI,WAAU;sBAAuE;;;;;;kBACtG,cAAA,8OAAC;;;;;;;;;;AAGb","debugId":null}}]
}